<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
	
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	 	http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
	 
	 
	<bean id="propertyConfigurer"
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>classpath:jdbc.properties</value>
			</list>
		</property>
	</bean>
	
	<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close" >
		<property name="driverClass" value="${c3p0.driverClass}" />
		<property name="jdbcUrl" value="${c3p0.jdbcUrl}" />
		<property name="user" value="${c3p0.username}" />
		<property name="password" value="${c3p0.passwd}" />
		<property name="initialPoolSize" value="${c3p0.initialPoolSize}" />
		<property name="minPoolSize" value="${c3p0.minPoolSize}" />
		<property name="maxPoolSize" value="${c3p0.maxPoolSize}" />
		<property name="maxIdleTime" value="${c3p0.maxIdleTime}" />
		<property name="acquireIncrement" value="${c3p0.acquireIncrement}" />
		<property name="idleConnectionTestPeriod" value="${c3p0.idleConnectionTestPeriod}" />
		<property name="acquireRetryAttempts" value="${c3p0.acquireRetryAttempts}" />
		<property name="maxStatements" value="${c3p0.maxStatements}" />
		<property name="maxStatementsPerConnection" value="${c3p0.maxStatementsPerConnection}" />
	</bean>
	<!-- 数据源配置 -->
	<bean id="dataSourceSpring" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
		<property name="driverClassName" value="${c3p0.driverClass}"></property>
		<property name="url" value="${c3p0.jdbcUrl}"></property>
		<property name="username" value="${c3p0.username}"></property>
		<property name="password" value="${c3p0.passwd}"></property>
	</bean>
	<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
		<property name="dataSource" ref="dataSourceSpring"/>
		<!-- hibernate实体类配置 -->
		<property name="packagesToScan">
			<list>
				<value>com.jt.gateway.entity</value>
			
<!-- 				<value>com.zxh.ssq.entity</value> -->
			</list>
		</property>
		<!-- hibernate相关参数配置 -->
		<property name="hibernateProperties">
			<value>
			hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect
			hibernate.show_sql=true
			hibernate.format_sql=false
			hibernate.query.substitutions=true 1, false 0
			hibernate.jdbc.batch_size=20
			hibernate.cache.use_query_cache=true
			hibernate.current_session_context_class=org.springframework.orm.hibernate4.SpringSessionContext
			hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory
			hibernate.cache.provider_configuration_file_resource_path=ehcache-hibernate.xml
			hibernate.cache.use_structured_entries=true
			hibernate.generate_statistics=false
			</value>
		</property>
	</bean>	
	<!-- 事务配置 -->
	<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>
	

	
	 <!-- 配置 Annotation 驱动，扫描@Transactional注解的类定义事务 -->  
    <tx:annotation-driven transaction-manager="transactionManager"  /> 
	
	
	<bean  id="jdbcDao" class="com.jt.gateway.dao.JdbcDaoImpl">
		<property name="sdbdriver"  value="${c3p0.driverClass}"></property>
		<property name="sconnStr"  value="${c3p0.jdbcUrl}"></property>
		<property name="user"  value="${c3p0.username}"></property>
		<property name="passwd"  value="${c3p0.passwd}"></property>
	</bean>
	<bean  id="dao" class="com.jt.gateway.dao.SpringJdbcDaoImpl">
	        <property name="dataSource"  ref="dataSource"></property>
	</bean>
	<!-- 开始 -->
	
	<!-- 引用ehCache 的配置-->
	<bean id="defaultCacheManager"
		class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
		<property name="configLocation">
			<value>classpath:ehcache.xml</value>
		</property>
	</bean>
	<!-- 定义ehCache 的工厂，并设置所使用的Cache name -->
	<bean id="ehCache" class="org.springframework.cache.ehcache.EhCacheFactoryBean">
		<property name="cacheManager">
			<ref local="defaultCacheManager" />
		</property>
		<property name="cacheName">
			<value>DEFAULT_CACHE</value>
		</property>
	</bean>
	
     
    <!--
    看不懂干吗用的先注释
     <context:component-scan base-package="com.jt.crawler.admin.dao.impl">
	</context:component-scan>
	<context:component-scan base-package="com.jt.crawler.admin.service.impl">
	</context:component-scan>
		 -->
	
	
</beans>